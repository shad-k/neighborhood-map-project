function initMap(){pos=new google.maps.LatLng(28.5714851,77.2591487),map=new google.maps.Map(document.getElementById("map"),{zoom:15,center:pos,mapTypeControl:!1}),defaultIcon=makeMarkerIcon("0091ff"),highlightedIcon=makeMarkerIcon("FFFF24"),largeInfowindow=new google.maps.InfoWindow,ko.applyBindings(new ViewModel)}function runNearbySearch(){new google.maps.places.PlacesService(map).nearbySearch({location:pos,radius:"4000",rankBy:google.maps.places.RankBy.PROMINENCE},function(a,b){makeMarkers(a)})}function makeMarkers(a){hideMarkers(),markers.length=0;for(var b=0;b<a.length;b++)if(!0===a[b].show()){console.log(b);var c=new google.maps.Marker({position:a[b].geometry.location,map:map,title:a[b].name,icon:defaultIcon});markers.push(c),c.addListener("click",function(){populateInfoWindow(this,largeInfowindow)}),c.addListener("mouseover",function(){this.setIcon(highlightedIcon)}),c.addListener("mouseout",function(){this.setIcon(defaultIcon)})}}function makeMarkerIcon(a){return new google.maps.MarkerImage("http://chart.googleapis.com/chart?chst=d_map_spin&chld=1.15|0|"+a+"|40|_|%E2%80%A2",new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34),new google.maps.Size(21,34))}function populateInfoWindow(a,b){b.marker!=a&&(b.marker=a,b.setContent("<div>"+a.title+"</div>"),b.open(map,a),b.addListener("closeclick",function(){b.marker=null}))}function hideMarkers(){for(var a=0;a<markers.length;a++)markers[a].setMap(null)}function mapError(){alert("The site is not available right now. Please try after some time")}document.querySelector(".arrow").addEventListener("click",function(a){document.querySelector(".searchAndList").classList.toggle("slipIn"),document.querySelector(".arrow").classList.toggle("floatRight")});var markers=[],map,pos,defaultIcon,highlightedIcon,largeInfowindow,ViewModel=function(){var a=new google.maps.places.PlacesService(map);this.filter=ko.observable();var b=this;this.placeList=ko.observableArray([]),a.nearbySearch({location:pos,radius:"4000",rankBy:google.maps.places.RankBy.PROMINENCE},function(a,c){for(var d=0;d<a.length;d++)a[d].show=ko.observable(!0),b.placeList.push(a[d]);makeMarkers(b.placeList())}),this.filterText=ko.observable(),this.filter=function(a,c){if(13===c.keyCode){for(var d=0;d<b.placeList().length;d++)b.placeList()[d].name.includes(b.filterText())?(b.placeList()[d].show(!0),console.log(b.placeList()[d].show())):b.placeList()[d].show(!1);makeMarkers(b.placeList())}},this.showInfoWindow=function(a){google.maps.event.trigger(markers[a()],"click")}};